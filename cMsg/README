cMsg Software Package

This is a short guide to the installation and running of cMsg (pronounced see message).
cMsg can be downloaded from the Jefferson Lab ftp site by going to
ftp://ftp.jlab.org/pub/coda/cMsg/0.9beta  and grabbing a number of files.
For everything, get cMsg-0.9.tar.gz. For the java classes, grab the cMsg-0.9.jar
file. And, of course, this file (README) and the copyright (NOTICE) are also available.


FULL INSTALLATION PREREQUISITES:

* Java version 1.5 must be installed and in the user's path.
    Test this by typing "java -version". If it returns a statement
    saying it is java 1.5 you are in business. Otherwise it can be
    downloaded from http://java.sun.com/j2se/1.5.0/download.jsp .
* To create the java programmer's guide documentation, "javadoc"
    must also be in the user's path.
* doxygen version 1.3.9 or later must be installed and in the user's path
    for the C and C++ programmer's guide documentation to be generated.
    It can be downloaded from http://www.doxygen.org .
* Operating system must be Linux or Solaris.


FULL INSTALLATION:

* download cMsg-0.9.tar.gz
* do unix command:  tar xfz cMsg-0.9.tar.gz
* cd into cMsg directory
* type "make"


JAVA ONLY:

If all you want to do is run the cMsg server and java clients, all you
really need is the jar file - cMsg-0.9.jar which you can get off the
Jefferson Lab ftp site. Follow the instructions below on how to run
them. If you want the documentation however, you must do the full
installation.


PLATFORMS:

This software is designed to be made on Solaris and Linux.
To date it has run on Solaris8/9 and on Redhat EL3 (2.4 kernel).
C clients can also be made for VxWorks on the PPC platform.
To make for VxWorks, all of the Makefile.vxworks files must be
modified to point to the proper cross compiler, include file directory, etc.
Set the ARCH environmental variable to VXWORKSPPC,
then type "make" from the top level directory.


DOCUMENTATION:

The developer's and user's guides can be found in the "doc" directory.
When typing "make", the last thing the Makefile does is create the
progammer's guide documentation. First the java documentation is created
by running "javadoc". Next the documentation for C and C++ are generated
by doxygen. If this fails because doxygen does not exist, the installation
should still be complete with the only exception being the programmer's guide
documentation.


RUNNING THE CMSG SERVER:

Simply type the command,

    java -cp <installdir>/cMsg/jar/cMsg-0.9.jar org/jlab/coda/cMsg/cMsgDomain/server/cMsgNameServer
    
where <installdir> is where the cMsg directory is located.
If you want lots of informational output from the server, use this form,

    java -cp <installdir>/cMsg/jar/cMsg-0.9.jar -Ddebug=info org/jlab/coda/cMsg/cMsgDomain/server/cMsgNameServer


RUNNING A JAVA MESSAGE PRODUCER AND CONSUMER:

To run the producer & consumer type,

    java -cp <installdir>/cMsg/jar/cMsg-0.9.jar org/jlab/coda/cMsg/apps/cMsgProducer -debug -u cMsg://<serverhost>:3456/cMsg/test
and 
    java -cp <installdir>/cMsg/jar/cMsg-0.9.jar org/jlab/coda/cMsg/apps/cMsgConsumer -debug -u cMsg://<serverhost>:3456/cMsg/test

respectively, where <installdir> is where the cMsg directory is located,
<serverhost> is the name of the computer running the server, and the
"-debug" flag prints the rate of messages being produced or consumed.


RUNNING A C MESSAGE PRODUCER AND CONSUMER:

To run the producer & consumer a little editing must be done since these cMsg
clients are a bit on the crude side.

* Edit cMsg/src/C/producer.c and consumer.c so that the UDL has the value
    "cMsg://<serverhost>:3456/cMsg/test" where <serverhost> is the name
    of the computer running the server.
* Type "make cCode" from the top level directory
* Make sure the cMsg library is in your LD_LIBRARY_PATH by typing,
    "setenv LD_LIBRARY_PATH <installdir>/cMsg/lib/Linux:$LD_LIBRARY_PATH"
    If you're running on Solaris, substitute "SunOS" for "Linux".
    
* Now type,

    <installdir>/bin/Linux/producer
and
    <installdir>/bin/Linux/consumer
    
where <installdir> is where the cMsg directory is located.
If running on Solaris, substitute "SunOS" for "Linux".


PROBLEMS:

email Elliott Wolin - wolin@jlab.org, or
      Carl Timmer   - timmer@jlab.org


COPYRIGHT

For any issues regarding use and copyright, read the NOTICE file.

